几篇和我们的工作相关的论文：

1. [CXL-DMSim: A Full-System CXL Disaggregated Memory Simulator With Comprehensive Silicon Validation](https://arxiv.org/abs/2411.02282?utm_source=chatgpt.com)

2. [CXLMemSim: A pure software simulated CXL.mem for performance characterization](https://arxiv.org/pdf/2303.06153v2)

3. [TSim4CXL: Trace-Driven Simulation Framework for CXL-Based High-Performance Computing Systems](https://link.springer.com/chapter/10.1007/978-3-031-99854-6_6?utm_source=chatgpt.com)

4. [A Novel Extensible Simulation Framework for CXL-Enabled Systems](https://arxiv.org/html/2411.08312v1?utm_source=chatgpt.com)

下面是国防科技大学团队成果：

1. [A Full-System Simulation Framework for CXL-Based SSD Memory System](https://arxiv.org/html/2501.02524?utm_source=chatgpt.com)

2. [基于**gem5**的CXL内存池系统设计与实现](https://kns.cnki.net/kcms2/article/abstract?v=2t0iREynv6likxXQUFX_b-nsj_F4Yv4MRd4UcX5KPF_hcpuFMY4mCQf2FwfG0k5XM_g86d60nybKZxO16RiQ5CC0QMKnOKvZAcD2FTx6poMPWQsBUiS645UgKyrp0SO9oMKRfwkUwdwpXErU4F3tSyfXiJLevbwFTIsSDkQmFS6evg04woRN8bvc0jTN9yaFBt0VvJEhPwI=&uniplatform=NZKPT)

3. [CXL-DMSim: A Full-System CXL Disaggregated Memory Simulator With Comprehensive Silicon Validation](https://ieeexplore.ieee.org/document/11153390)及其对应的[开源模拟器](https://github.com/ferry-hhh/CXL-DMSim?utm_source=chatgpt.com)

## 关于gem5

**gem5** 是一个广泛使用的 **计算机系统结构模拟器（Computer Architecture Simulator）**，主要用于 **计算机体系结构研究、教学和性能分析**。它是学术界和工业界用于研究新型处理器架构、内存系统、互连网络、以及系统级设计的重要工具之一。

------

### 🧩 基本概念

**gem5** 是一个模块化、可扩展的仿真平台，支持多种体系结构（例如 **x86、ARM、RISC-V、SPARC、MIPS** 等）。
 它能够在**不同精度和速度之间权衡**地模拟系统，从简单的功能仿真（仅验证正确性）到复杂的周期级仿真（精确模拟时序）。

**这听起来和虚拟机比较像，但还是有本质区别**：

> **gem5 是一个“系统级计算机硬件模拟器”，它在真实主机上**用软件方式**精确地“重建”一台计算机的硬件（CPU、cache、总线、内存、I/O设备等），并在这台“虚拟硬件上”运行操作系统或应用程序。**

### 澄清

gem5 并不是像 VirtualBox、VMware 那样的“虚拟机管理器”，它不是在真实 CPU 上直接跑指令，而是 **逐条指令用软件模拟硬件行为**。

可以这样理解：

| 对比项   | gem5                                | 虚拟机（如 QEMU/KVM、VMware）          |
| -------- | ----------------------------------- | -------------------------------------- |
| 模拟层次 | **硬件级（cycle-accurate）**        | **系统软件级（ISA 转译或硬件虚拟化）** |
| 目标     | 研究 CPU、cache、内存、总线等微架构 | 运行不同操作系统或软件环境             |
| 执行方式 | 真实系统上运行的**软件仿真**        | 在真实硬件上虚拟化执行                 |
| 速度     | 慢（可能是实际硬件的 1000 倍慢）    | 接近原生速度                           |
| 精度     | 高（可精确到时钟周期级）            | 低（不模拟电路或缓存时序）             |

## ⚙️gem5 运行时到底在做什么？

你在运行 gem5 时，实际上是在 **你的真实电脑上跑一个“模拟器进程”**。
 这个进程内部维护着一整套数据结构，分别表示：

- 模拟的 CPU 核（寄存器文件、流水线、乱序队列等）
- cache 层次结构（L1/L2/L3）
- 主存（DRAM）
- 系统总线、互连
- I/O 设备（磁盘、串口、网络卡）
- 事件调度器（控制模拟时间推进）

gem5 会：

1. **加载你的配置脚本**（通常是 Python 文件，描述硬件拓扑和参数）
2. **建立虚拟系统的硬件模型**
3. **加载操作系统镜像（Full System 模式）或用户程序（SE 模式）**
4. **从第一条指令开始执行，软件方式模拟每一步硬件行为**

## 🧠 两种运行模式

gem5 有两种核心模式，这也是理解它最关键的部分：

### 1️⃣ SE 模式（System-call Emulation）

- 只模拟用户态程序（例如 `hello`、`SPEC CPU` 测试程序）
- 不模拟操作系统，只在程序调用系统调用（syscall）时由 gem5 伪装成内核来响应
- 模拟速度较快
- 用于研究微架构（如乱序执行、cache、branch predictor）

👉 类比成：“在 gem5 模拟的 CPU 上运行一个裸程序”

------

### 2️⃣ FS 模式（Full System）

- 模拟整套硬件：CPU、cache、内存、I/O 总线、磁盘控制器……
- 然后在这个虚拟硬件上 **启动真实操作系统镜像（如 Linux）**
- 内核启动、设备枚举、中断响应等都会完整经历
- 速度较慢，但能运行真实应用

👉 类比成：“gem5 是一台完全虚拟的电脑，Linux 就是装在这台电脑上的系统”

------

## 💻 与真实机器的关系

你运行 gem5 时：

- **你的物理电脑**只是提供运行 gem5 模拟器的算力（CPU + 内存）
- gem5 在你的电脑中 **软件地再现另一台电脑的硬件**
- 那台虚拟电脑可以是：
  - 单核 RISC-V + L1/L2 cache + DDR4
  - 或 8 核 x86 + CXL 设备 + NUMA 内存拓扑
- 如果你使用 FS 模式，那台虚拟电脑里确实会“装”一个 Linux 系统，并且你能在里面登录、运行程序（通过串口或虚拟终端）